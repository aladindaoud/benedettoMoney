 

<ion-content [fullscreen]="true">
 
  <ion-refresher mode="ios" slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <hr><hr>


  <ion-item lines="none" >
    <ion-label class="text" >
      Cumulative amount
  </ion-label>
  <ion-note style="color: #636ae8;">{{stuckedTotal  |  currency:'TND'}}</ion-note>
  </ion-item >
  
  <ion-item lines="none" >
    <ion-label class="text">
      Monthly Finance
  </ion-label>
   
  </ion-item >
  <!-- <p-calendar 
  [(ngModel)]="date" 
  [showIcon]="true" 
  [showOnFocus]="false" 
  inputId="buttondisplay" /> -->

  
 
  <ion-item lines="none" mode="ios">
    <ion-label class="text" >Select Year</ion-label>
    <ion-select  class="text" slot="end" [(ngModel)]="selectedYear" (ionChange)="onYearOrMonthChange()">
      <ion-select-option   *ngFor="let year of availableYears" [value]="year">{{ year }}</ion-select-option>
    </ion-select>
  </ion-item>

  <!-- Month Selector -->
  <ion-item lines="none" mode="ios">
    <ion-label  class="text">Select Month</ion-label>
    <ion-select  class="text" slot="end" [(ngModel)]="selectedMonth" (ionChange)="onYearOrMonthChange()">
      <ion-select-option *ngFor="let month of availableMonths" [value]="month">{{ month }}</ion-select-option>
    </ion-select>
  </ion-item>



  <ion-item lines="none">
    <ion-label class="text2">
      Financing of {{ selectedYear }}-{{ selectedMonth }}
  </ion-label>
  </ion-item>
  <ion-item lines="none">
    <ion-label class="text">
      Total Income
    </ion-label>
    <ion-icon style=" 
       border: none;
    color: #636ae8;
    padding-right: 10px; font-weight: bold;"
       slot="end" name="arrow-down-outline"></ion-icon>
   </ion-item>
   <ion-item lines="none">
    <ion-note class="text3">
      {{   totalIncome |  currency:'TND' }}
     </ion-note>
   </ion-item>

   <ion-item lines="none">
    <ion-label class="text">
    Total Outcomes
    </ion-label>
    <ion-icon style=" 
       border: none;
    color: #E8618CFF;
    padding-right: 10px; font-weight: bold;"
       slot="end" name="arrow-up-outline"></ion-icon>
   </ion-item>
   <ion-item lines="none">
    <ion-note class="text3">
      {{ totalExpenses | currency:'TND':'TND'}}
     </ion-note>
   </ion-item>


   <ion-item lines="none">
    <ion-label class="text">
    Total 
    </ion-label>
    <ion-icon style=" 
    border: none;
 color: #636ae8;
 padding-right: 10px; font-weight: bold;"
    slot="end" name="arrow-down-outline"></ion-icon> <ion-icon style="   border: none;color: #E8618CFF;padding-right: 10px; font-weight: bold;"slot="end" name="arrow-up-outline"></ion-icon>
   
  </ion-item>
   <ion-item lines="none">
    <ion-note class="text3">
      {{ netTotal | currency:'TND':'TND'}}
     </ion-note>
   </ion-item>

 

  <ion-item lines="none">
    <ion-label class="text2">
      Financing of days
  </ion-label>
  </ion-item>

  <!-- Accordion to display daily records -->
  <ion-accordion-group>
    <ion-accordion *ngFor="let record of dailyRecords">




      <ion-item slot="header">
        <ion-label>{{ record.date }}</ion-label>
      </ion-item>
      <div slot="content">
        
        <ion-item lines="none">
          <ion-label class="text">
            Income
          </ion-label>
          <ion-icon style=" 
             border: none;
          color: #636ae8;
          padding-right: 10px; font-weight: bold;"
             slot="end" name="arrow-down-outline"></ion-icon>
         </ion-item>
         <ion-item lines="none">
          <ion-note class="text3">
            {{record.income | currency:'TND':'TND'}}
           </ion-note>
         </ion-item>







      
 <ion-item lines="none">
  <ion-label class="text">
    Outcomes
  </ion-label>
  <ion-icon style=" 
     border: none;
  color: #E8618CFF;
  padding-right: 10px; font-weight: bold;"
     slot="end" name="arrow-up-outline"></ion-icon>
 </ion-item>


 <div *ngFor="let expense of record.expenses">
  <ion-item  mode="ios" lines="none">
    <ion-label style="display: flex;
    flex-direction: column;margin: 0;gap: 5px;" class="text4"> {{expense.key}}   <ion-note  > {{expense.value | currency:'TND':'TND'}}</ion-note></ion-label>
  
  </ion-item>
</div>
      
<p style="    display: flex;
flex-direction: row;
justify-content: flex-end;
padding-right: 25px;" class="text3"><strong>Total Outcomes</strong> {{record.totalOutcomes | currency:'TND':'TND'}}</p>


<p style="    display: flex;
flex-direction: row;
justify-content: flex-end;
padding-right: 25px;" class="text3"><strong>Recipe</strong> {{record.total | currency:'TND':'TND'}}</p>
 </div>
</ion-accordion>
</ion-accordion-group>
 
</ion-content>
